# Data Generator 
Python package providing an array of data types that can be sent to storage in the ways by which AnyLog supports. 
Ping and Percentage CPU data are based on data originally provided by a Fiber-optic comapny located in the Bay Area.

## Requirements 
For local install 
   * [psutil](https://pypi.org/project/psutil/)
   * [requests](https://pypi.org/project/requests/) 

Alternative users can run via [Docker](https://docs.docker.com/engine/install/) package

# How to Run 
## Python 
```
python3 data_generator.py  --help
   :positional arguments:
       dbms:str   - database name 
       sensor:str - type of sensor to get data from
         * machine          - boot time, cpu useage, swap memory percentage, disk useage percentege 
         * ping             - information regarding a ping sensor, data originally generated by Lite San Leandro devicies
         * percentagecpu    - information regarding a percentagecpu sensor, data originally generated by Lite San Leandro devicies
         * sin              - sin values over time 
         * cos              - cossin values over time      
         * rand             - random value generated 
   :optional arguments:
       -h,  --help                          show this help message and exit
       -c,  --conn         CONN             REST host and port                                                 (default: None)
       -f,  --store-format STORE-FORMAT     format to get data                                                 (default: print)       {rest,mqtt,file,print}
       -m,  --mode         MODE             insert type                                                        (default: streamning)  {file,streaming}
       -i,  --iteration    ITERATION        number of iterations. if set to 0 run continuesly                  (default: 1)
       -x,  --frequency    FREQUENCY        value by which to multiply generated value(s)                      (default: 1)
       -r,  --repeat       REPEAT           for machine & ping data number of rows to generate per iteration   (default: 10)
       -s,  --sleep        SLEEP            wait between insert                                                (default: 0)
       -p,  --prep-dir     PREP-DIR         directory to prepare data in                                       (default: $HOME/AnyLog-Network/data/prep)
       -w,  --watch-dir    WATCH_DIR        directory for data ready to be stored                              (default: $HOME/AnyLog-Network/data/watch)
       -mc, --mqtt-conn    MQTT_CONN        MQTT connection info                                               (default: mqwdtklv@driver.cloudmqtt.com:uRimssLO4dIo)
       -mp, --mqtt-port    MQTT_PORT        MQTT port 							       (default: 18975)
       -mt, --mqtt-topic   MQTT_TOPIC       MQTT topic 							       (default: test)
```

## Docker 
For Docker, a user is required to specify `DBMS` and `SENSOR` enviorment variables. All other params are optional and will be ignored if not used.

```
docker run --name ${SENSOR}-data \
   -e DBMS=${DATABASE_NAME} \
   -e SENSOR=${SENSOR} \
   -e CONN=${CONN} \
   -e STORE_FORMAT=${STORE_FORMAT} \
   -e MODE=${MODE} \
   -e ITERATION=${ITERATION} \
   -e FREQUENCY=${FREQUENCY} \
   -e REPEAT=${REPEAT} \
   -e SLEEP=${SLEEP} \
   -e PREP_DIR=${PREP_DIR} \ 
   -e WATCH_DIR=${WATCH_DIR} \
   -e MQTT_CONN=${MQTT_CONN} \
   -e MQTT_PORT=${MQTT_PORT} \
   -e MQTT_TOPIC=${MQTT_TOPIC} \  
   --network host anylogco/sample-data-generator:latest  
```

